{% extends "base.html.twig" %}

{% block body %}
<body style="background-color:#E3CFCD">
  <!-- Main Content -->
 <!-- Contact Section -->
    <section class="page-section" id="contact">
        <div class="container jumbotron" style="background-color:white">
          <div class="row justify-content-center">
            <div class="col-lg-6 text-center">
              <h2 class="mt-0">Administration</h2>
              <hr class="divider my-4">
              <p class="text-muted mb-5"><a href="index.php?action=profile">Revenir à mon profil</a></p>
            </div>
          </div>
          {#<div class="row">
              <div class="col-3 offset-1 text-left">
                    <h4 class="mb-30" style="margin-bottom:30px">Paramétrage</h4>  
                    <div class="row">
                        <a href="index.php?action=updatePassword">Modification du mot de passe</a>
                    </div>
              </div>
              <div class="col-6 offset-1 text-center">
                <h4 class="text-left mb-30" style="margin-bottom:30px">Administration</h4>
                <div class="row" style="margin-bottom:10px">
                    <a href="index.php?action=updatePassword">Administration des posts</a>
                </div>                
                <div class="row" style="margin-bottom:10px">
                    <a href="index.php?action=addPost">Ajouter un post</a>
                </div>                
                <div class="row" style="margin-bottom:10px">
                    <a href="index.php?action=updatePassword">Administration des utilisateurs</a>
                </div>                
                <div class="row" style="margin-bottom:10px">
                    <a href="index.php?action=updatePassword">Gestion des roles utilisateurs</a>
                </div>
            </div>
        </div>#}
{#        <hr>#}
        {#Blog administration part#}  
        <div class="row justify-content-center"{# style="margin-top:30px"#}>
          <div class="col-lg-12 col-12">
                <h3 class="mt-0">Blog Post</h3>
                <p>Pour ajouter des blogs posts, c'est <a href="index.php?action=addPost">ici</a> !</p>
{#                <hr class="divider my-4">#}
                <table id="postAdministrationTable" class="table text-center col-12">
                  <tr>
                      <th>Id</th>
                      <th>Titre</th>
                      <th class="postTableHeaderContent">Contenu</th>
                      <th class="postTableHeaderAuteur">Auteur</th>
                      <th class="postTableHeaderDate">Date</th>
                      <th>Actions</th>
                  </tr>
                  {% for post in posts %}
                  <tr>
                      <td>{{ post.id }}</td>
                      <td><a href="index.php?action=post&id={{ post.id }}">{{ post.title }}</a></td>
                      <td class="postTableDataChapo">{{ post.chapo }}</td>
                      <td class="postTableDataUser">{{ post.user }}</td>
                      <td class="postTableDataDate">{{ post.date }}</td>
                      <td>
                          <a href="index.php?action=updatePost&id={{ post.id }}"><i class="fas fa-edit"></i></a>
                          <a href="index.php?action=deletePost&id={{ post.id }}"><i class="fas fa-trash-alt"></i></a>
                      </td>
                  </tr>
                  {% endfor %}
              </table>
          </div>
        </div>
              
        {#Comment administration part#}  
        <div class="row justify-content-center"{# style="margin-top:30px"#}>
          <div class="col-lg-12">
                <h3 class="mt-0">Commentaire</h3>
                <table id="commentAdministrationTable" class="table text-center">
                    <tr>
                        <th>Id</th>
                        <th>Titre</th>
                        <th class="commentTableHeaderContent">Contenu</th>
                        <th class="commentTableHeaderDate">Date</th>
                        <th class="commentTableHeaderAuteur">Auteur</th>
                        <th class="commentTableHeaderValidate">Valide</th>
                        <th>Actions</th>
                    </tr>
                  {% for comment in comments %}
                  <tr>
                      <td>{{ comment.id }}</td>
                      <td><a href="">{{ comment.title }}</a></td>
                      <td class="commentTableDataContent">{{ comment.comment }}</td>
                      <td class="commentTableDataDate">{{ comment.date }}</td>
{#                      <td>{{ comment.post_id }}</td>#}
                      <td class="commentTableDataUser">{{ comment.user }}</td>
                      <td class="commentTableDataValidate">{% if comment.validate == 0 %}Non{% else %}Oui{% endif %}</td>
                      <td>
                          {% if comment.validate == 0 %}<a href="index.php?action=validateComment&id={{ comment.id }}"><i class="fas fa-check-square"></i></a>{% endif %}
                          {#<a href="index.php?action=post&id={{ comment.postId }}"><i class="fas fa-edit"></i></a>#}
                          <a href="index.php?action=deleteComment&post={{ comment.postId }}&id={{ comment.id }}"><i class="fas fa-trash-alt"></i></a>
                      </td>
                  </tr>
                  {% endfor %}
              </table>
          </div>
        </div>
      </div>
    </section>
</body>
{% endblock %}
